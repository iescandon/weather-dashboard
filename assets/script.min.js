var citiesArray=[],cityName=localStorage.getItem("city"),cityLat="29.76",cityLon="-95.36",currentHour=moment().hours(),windowWidth=this.innerWidth;$("#current-date").text(moment().format("dddd, MMMM Do YYYY")),getCurrentWeather();function renderCityButtons(){$(".city-buttons").empty();var a="";citiesArray.forEach(function(b){var c=$("<div>"),d=$("<button>");d.addClass("cityBtn"),d.attr("data-state",b),d.text(b),c.append(d),$(".city-buttons").prepend(c),991>=windowWidth&&(a+=`<option value= '${b}'>`)}),$("#cities").html(a)}function retrieveCityInfo(a){a.preventDefault();var b=$("#city-search-input").val().trim();cityName=b,localStorage.setItem("city",cityName),citiesArray.push(cityName),$("#city-search-input").val(""),renderCityButtons(),getCurrentWeather()}function chooseCity(){var a=$(this).attr("data-state");cityName=a,localStorage.setItem("city",cityName),getCurrentWeather()}function getCurrentWeather(){if(cityName){var a=`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${"96e27da4f61bebe5c6e5c7c18c453252"}&units=imperial`;$.ajax({url:a,method:"GET"}).then(renderCurrentWeather)}else cityName="Houston",getCurrentWeather()}function getForecast(){var a=`https://api.openweathermap.org/data/2.5/onecall?lat=${cityLat}&lon=${cityLon}&exclude=hourly,minutely&appid=${"f60223f1ece87aa55821b69a70f473df"}&units=imperial`;$.ajax({url:a,method:"GET"}).then(function(a){renderForecast(a),renderUVindex(a)})}function renderCurrentWeather(a){cityLat=a.coord.lat,cityLon=a.coord.lon,cityName=a.name;var b=a.weather[0].main;$(".city-name").text(cityName);var c=Math.ceil(a.main.temp);$(".temp-data").text(`Temperature: ${c}° F`);var d=a.main.humidity;$(".humidity-data").text(`Humidity: ${d}%`);var e=a.wind.speed;$(".wind-data").text(`Wind Speed: ${e} MPH`),"Clear"===b?20>currentHour&&6<currentHour?$("#weather-icon").attr("src","./assets/images/sunny.png"):$("#weather-icon").attr("src","./assets/images/moon.png"):"Clouds"===b?$("#weather-icon").attr("src","./assets/images/cloudy.png"):"Rain"===b?$("#weather-icon").attr("src","./assets/images/rainy.png"):"Mist"===b?$("#weather-icon").attr("src","./assets/images/drizzle.png"):"Thunderstorm"===b?$("#weather-icon").attr("src","./assets/images/thunderstorm.png"):"Snow"===b?$("#weather-icon").attr("src","./assets/images/snowy.png"):"Wind"===b?$("#weather-icon").attr("src","./assets/images/windy.png"):$("#weather-icon").attr("src","./assets/images/earth.png"),getForecast()}function renderForecast(a){$("#bottom-row").empty();for(var b,c=1;6>c;c++){b=$("<div>"),b.addClass("col-2-sm col-md mb-3 dayBlock");var d=$("<p>");d.addClass("row justify-content-center mt-3 tiny-date");var e=moment().add(c,"days").format("l");d.text(e);var f=$("<p>");f.addClass("row justify-content-center mb-3 tiny-day");var g=moment().add(c,"days").format("dddd");f.text(g);var h=a.daily[c].weather[0].main,j=$("<img>");j.addClass("row justify-content-center mb-3 tiny-icon"),"Clear"===h?j.attr("src","./assets/images/sunny.png"):"Clouds"===h?j.attr("src","./assets/images/cloudy.png"):"Rain"===h?j.attr("src","./assets/images/rainy.png"):"Mist"===h?j.attr("src","./assets/images/drizzle.png"):"Thunderstorm"===h?j.attr("src","./assets/images/thunderstorm.png"):"Snow"===currentWeather?j.attr("src","./assets/images/snowy.png"):"Wind"===currentWeather?j.attr("src","./assets/images/windy.png"):j.attr("src","./assets/images/earth.png");var k=$("<p>");k.addClass("row justify-content-center mb-3 tiny-temp");var l=Math.ceil(a.daily[c].temp.day);k.text(`Temp: ${l}° F`);var m=$("<p>");m.addClass("row justify-content-center mb-3 tiny-humid");var n=a.daily[c].humidity;m.text(`Humid: ${n}%`),b.append(d),b.append(f),b.append(j),b.append(k),b.append(m),$("#bottom-row").append(b)}}function renderUVindex(a){var b=a.daily[0].uvi;$("#uv-index").text(b),11<=b?($("#uv-index").removeClass("very-high"),$("#uv-index").removeClass("high"),$("#uv-index").removeClass("moderate"),$("#uv-index").removeClass("low"),$("#uv-index").addClass("extreme")):8<=b&&11>b?($("#uv-index").removeClass("extreme"),$("#uv-index").removeClass("high"),$("#uv-index").removeClass("moderate"),$("#uv-index").removeClass("low"),$("#uv-index").addClass("very-high")):6<=b&&8>b?($("#uv-index").removeClass("extreme"),$("#uv-index").removeClass("very-high"),$("#uv-index").removeClass("moderate"),$("#uv-index").removeClass("low"),$("#uv-index").addClass("high")):3<=b&&6>b?($("#uv-index").removeClass("extreme"),$("#uv-index").removeClass("very-high"),$("#uv-index").removeClass("high"),$("#uv-index").removeClass("low"),$("#uv-index").addClass("moderate")):($("#uv-index").removeClass("extreme"),$("#uv-index").removeClass("very-high"),$("#uv-index").removeClass("high"),$("#uv-index").removeClass("moderate"),$("#uv-index").addClass("low"))}$(document).on("click",".cityBtn",chooseCity),$(".searchBtn").click(retrieveCityInfo);